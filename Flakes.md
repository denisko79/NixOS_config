### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏ Flakes

1. **–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –≤—Å—ë –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `flake.nix`.
2. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å**: –∫–∞–∂–¥–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø–æ —Ö–µ—à—É (—á–µ—Ä–µ–∑ `flake.lock`), –∫–∞–∫ –≤ `package-lock.json` –∏–ª–∏ `Cargo.lock`.
3. **–ö–æ–º–ø–æ–∑–∏—Ä—É–µ–º–æ—Å—Ç—å**: –≤—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ flakes (–≤–∫–ª—é—á–∞—è Nixpkgs, Home Manager, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ç.–¥.).
4. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è**: –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (NixOS), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (Home Manager), dev-—Å—Ä–µ–¥ (nix develop), –ø–∞–∫–µ—Ç–æ–≤ –∏ —Ç.–ø.

---

### üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `flake.nix`

–ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ `flake.nix` –¥–ª—è NixOS:

```nix
{
  description = "My NixOS configuration";

  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–µ flakes: home-manager, nur, –≤–∞—à–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ —Ç.–¥.
  };

  outputs = { self, nixpkgs, ... }@inputs:
    let
      system = "x86_64-linux";
      pkgs = nixpkgs.legacyPackages.${system};
    in
    {
      nixosConfigurations.my-machine = nixpkgs.lib.nixosSystem {
        inherit system;
        modules = [
          ./configuration.nix
          # –∏–ª–∏ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å –º–æ–¥—É–ª—å –ø—Ä—è–º–æ –∑–¥–µ—Å—å
        ];
      };

      # –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å devShells, packages –∏ —Ç.–¥.
    };
}
```

---

### üîπ –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è

- **`inputs`** ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–¥—Ä—É–≥–∏—Ö flakes). –£–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ URL (`github:`, `git+https://`, `path:./local-flake`, –∏ —Ç.–¥.).
- **`outputs`** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –∞—Ç—Ä–∏–±—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nix (–Ω–∞–ø—Ä–∏–º–µ—Ä, `nixosConfigurations`, `packages`, `devShells`).
- **`flake.lock`** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π —Ñ–∞–π–ª, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–π —Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –≤—Ö–æ–¥–æ–≤ (–≤–∫–ª—é—á–∞—è —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ). –ï–≥–æ –Ω—É–∂–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

---

### üîπ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Flakes

‚úÖ **–ü–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å**: –ª—é–±–æ–π, —É –∫–æ–≥–æ –µ—Å—Ç—å –≤–∞—à `flake.nix` + `flake.lock`, –ø–æ–ª—É—á–∏—Ç **—Ç–æ—á–Ω–æ —Ç—É –∂–µ —Å–∏—Å—Ç–µ–º—É**.  
‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏.  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –æ–¥–∏–Ω flake –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å NixOS-–∫–æ–Ω—Ñ–∏–≥, Home Manager, dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ, CI-—Å–∫—Ä–∏–ø—Ç—ã.  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: flakes –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã ‚Äî –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤–Ω–µ —Å–≤–æ–µ–≥–æ –¥–µ—Ä–µ–≤–∞ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞—Ä—ã—Ö `nix-env`/`nix-build`).

---

### üîπ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

1. –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É flakes (–µ—Å–ª–∏ –µ—â—ë –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞):
   ```nix
   # –í /etc/nix/nix.conf
   experimental-features = nix-command flakes
   ```
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ flake:
   ```bash
   mkdir my-nixos-config && cd my-nixos-config
   nix flake init -t templates#nixos
   ```
3. –ò–∑–º–µ–Ω–∏—Ç–µ `flake.nix` –ø–æ–¥ —Å–µ–±—è.
4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```bash
   sudo nixos-rebuild switch --flake .#my-machine
   ```

---

### üîπ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- `nix flake show .` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π flake.
- `nix flake update` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ø–µ—Ä–µ–ø–∏—à–µ—Ç `flake.lock`).
- `nix run .#somePackage` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞–∫–µ—Ç –∏–∑ flake.
- `nix develop .` ‚Äî –≤–æ–π—Ç–∏ –≤ dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ.

---

### üîπ –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ / –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏

- –¢—Ä–µ–±—É–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Ñ–∏—á (—Ö–æ—Ç—è flakes —É–∂–µ –ø–æ—á—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç).
- –ò–Ω–æ–≥–¥–∞ —Å–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∏—Ç—å –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.
- –ù—É–∂–Ω–æ –ø—Ä–∏–≤—ã–∫–Ω—É—Ç—å –∫ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π `configuration.nix`).

---